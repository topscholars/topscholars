{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
    <title>Unit</title>
	<meta charset="UTF-8"/> 
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/smoothness/jquery-ui-1.10.3.custom.min.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/smoothness/jquery-ui-1.10.3.custom-edited.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/bootstrap.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/topscholars.css' %}" />
	<link rel="stylesheet" href="{% static 'tsweb/css/bootstrap-glyphicons.css' %}" type="text/css" />
	<link rel="stylesheet" href="{% static 'tsweb/css/hashtag.css' %}" type="text/css" />
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	<script src="{% static 'tsweb/js/jQuery1-10-1.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/WaterMark.js' %}"></script>
	<script src="{% static 'tsweb/js/bootstrap.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/jquery-ui-1.10.3.custom.min.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.cookie.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.datepick.js' %}"></script>
	<script src="{% static 'tsweb/js/util.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.validate.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.autosize.js' %}"></script>
	<script src="{% static 'tsweb/js/rangyinputs-jquery-1.1.2.min.js' %}"></script>
	<script src="{% static 'tsweb/js/hashtag.js' %}"></script>	
<script>
    EDITTABLE.prototype = new GridBase();
    var currentstage;
    var taglist;
    var editcategory = '';
function EDITTABLE(){
	var thisClass = this;
	var url = "{% url 'tsweb:tprocessajax' %}";
	var evalClass = 'UNITLIST';
	var tableClassAjax = 'TUNITLISTAJAX';
	this.availableTags = [];
	this.editTable = function (id) {
	    currentstage = 1;
	    $('.error').remove();
	    $('#accordion').find('.in').removeClass('in').addClass('collapse').css('height', '0px');
	    $('#collapseName').removeClass('collapse').addClass('in').css('height', 'auto');
	    thisClass.DisplayStage1();
		$.getJSON(
			url,
			{	class: evalClass,
				id: id  },
			function(result){
			    $("[id^=ele_]").val('');
				$.each(result, function (ini, val) {
				    if (ini == "assignment") {
				        var performance = eval(val);
				        if (performance.length > 0) {
				            $('#performancebtngrp').remove();
				            $('#performancebtnclr').remove();
				            var html = '<div id="performancebtngrp" class="btn-group-vertical" style="width:100%;"></div>';
                            html += '<div id="performancebtnclr" class="clearfix" style="height:10px;"></div>';
				            $(html).insertBefore("#btnAddPerformance");
				        }
				        else {
				            $('#performancebtngrp').remove();
				            $('#performancebtnclr').remove();
				        }
				        var option = '';
				        $("#evd_evidence_performance_name option").remove();
				        option += '<option value="">Select Performance Task</option>';
				        for (var i = 0; i < performance.length; i++) {
				            var html = '<button class="btn" data-toggle="modal" data-target="#new_pt_details_modal" style="border:1px black solid;" onclick="var event = new EDITTABLE();event.getPerformanceData(' + performance[i].id + ',1);">' + performance[i].name + '</button>';
				            $('#performancebtngrp').append(html);

				            option += '<option value="' + performance[i].id + '">' + performance[i].name + '</option>';
				        }
				        $("#evd_evidence_performance_name").append(option);
				    }
				    else if (ini == "lesson") {
				        var evidence = eval(val);
				        if (evidence.length > 0) {
				            $('#lessonbtngrp').remove();
				            $('#lessonbtnclr').remove();
				            var html = '<div id="lessonbtngrp" class="btn-group-vertical" style="width:100%;"></div>';
				            html += '<div id="lessonbtnclr" class="clearfix" style="height:10px;"></div>';
				            $(html).insertBefore("#btnAddEvidence");
				        }
				        else {
				            $('#lessonbtngrp').remove();
				            $('#lessonbtnclr').remove();
				        }
				        for (var i = 0; i < evidence.length; i++) {
				            var html = '<button class="btn" data-toggle="modal" data-target="#new_evidence_details_modal" style="border:1px black solid;" onclick="var event = new EDITTABLE();event.getEvidenceData(' + evidence[i].id + ',1);">' + evidence[i].name + '</button>';
				            $('#lessonbtngrp').append(html);
				        }
				    }
				    else if (ini == "activity") {
				        var lesson = eval(val);
				        $('#sortable li').remove();
				        if (lesson.length > 0) {
				            for (var i = 0; i < lesson.length; i++) {
				                var activity = eval(lesson[i].activity);
				                var html = '<li name="lessonid" class="panel panel-success">';
				                html += '<input type="hidden" name="lessonid" value="' + lesson[i].id  + '">';
				                html += '<div class="panel-heading"><div class="panel-title">';
				                html += '<a data-toggle="collapse" data-parent="sortable" href="#collapse' + lesson[i].id + '" class="lesson-title">' + lesson[i].name + '</a>';
				                html += '<i class="fa fa-sort pull-right"></i></div></div>';
				                html += '<div id="collapse' + lesson[i].id + '" class="panel-collapse in"><div class="panel-body">';
				                html += '<ul id="sortableActivities' + lesson[i].id + '" style="list-style: none;">';
				                if ((activity != null) && (activity.length > 0)) {
				                    for (var j = 0; j < activity.length; j++) {
				                        var type = '';
				                        if (activity[j].type == 'auto') { type = 'checked'; }
				                        html += '<li class="well well-small"><input type="hidden" name="activityid" value="' + activity[j].id + '"><div class="row"><div class="col-lg-6 col-md-6 col-sm-6"><input type="text" class="form-control input-small" placeholder="Add Activity Here" value="' + activity[j].name + '" disabled></div><div class="col-lg-3 col-md-3 col-sm-3"><div class="onoffswitch"><input type="checkbox" name="onoffswitch2" class="onoffswitch-checkbox" id="myonoffswitch' + activity[j].id + '" ' + type + ' disabled><label class="onoffswitch-label" for="myonoffswitch' + activity[j].id + '"><div class="onoffswitch-inner"></div><div class="onoffswitch-switch"></div></label></div></div><div class="col-lg-3 col-md-3 col-sm-3"><a href="javascript:alert(' + activity[j].id + ');" class="btn btn-small btn-success pull-right">Go to activity <i class="fa fa-arrow-right"></i></a></div></div></li>';
				                    }
				                }
				                html += '</ul>';
				                html += '<button role="button" class="btn btn-small pull-right" onclick="alert(' + lesson[i].id + ')">Add Activity <i class="fa fa-plus"></i></button>';
				                html += '</div></div></li>';
				                $('#sortable').append(html);
				            }
				            if (lesson.length > 0) {
				                for (var i = 0; i < lesson.length; i++) {
				                    $("#sortableActivities" + lesson[i].id).sortable();
				                }
				            }
				        }
				    }
				    else {
				        thisClass.seperateElement($("#ele_" + ini), val);
				        thisClass.seperateView(ini, val);
				        if ((ini == 'establishedgoal') || (ini == 'essentialquestion') || (ini == 'knowledge') || (ini == 'skill') || (ini == 'understanding')) {
				            $("#ele_" + ini).parent().parent().find(".highlighter").html(val);
				            $("#ele_" + ini).hashtags({ refresh: true, autocompleteURL: taglist });
				        }
				    }
				});
		})
		.error(function(xhr, status, error) {
    		alert('Error occur. Please contact the administrator.');
    	});
		return false;
	}
	this.getUnitlist = function (description) {
	    $("#list").html("<div style='width:100%;position=relative;text-align:center;'><img src='{% static 'tsweb/image/ajax-loader.gif' %}' alt='' style='margin:auto;width=100px;height=100px;position=relative;' /></div>");
	    $.get("{% url 'tsweb:tprocessajax' %}",
		{
			class: tableClassAjax,
		    description: description
		},
		function (result) {
		    $("#list").html(result);
		}
		);
	}
	this.savestage1 = function (next) {
	    if ($("#ele_name").val() != '') {
	        var odata;
	        var method;
	        if ($("#ele_unitid").val() == "") {
	            method = "add";
	        } else {
	            method = "save";
	        }
	        odata = { 'class': evalClass, 'method': method, 'id': $('#ele_unitid').val(), 'name': $('#ele_name').val(), 'description': $('#ele_description').val(), 'essentialquestion': $('#ele_essentialquestion').val(), 'establishedgoal': $('#ele_establishedgoal').val(), 'knowledge': $('#ele_knowledge').val(), 'skill': $('#ele_skill').val(), 'understanding': $('#ele_understanding').val(), };
	        $.post(url, odata,
                function (result) {
                    if (result.status == 'error') {
                        $('#unitexistalert').show();
                    }
                    else {
                        $("#ele_unitid").val(result.id);
                        thisClass.getUnitlist('');
                    }
                    if (next) {
                        thisClass.DisplayStage2();
                    }
                })
            .error(function (xhr, status, error) {
                alert('Error occur. Please contact the administrator.');
            });
	    }
	}
	this.savestage3 = function () {
	    var lessonlist = [];
	    var lessonorder = 1;
	    $('#sortable li[name=lessonid]').each(function () {
	        var lessonid = $(this).find('input[name=lessonid]').val();
	        var activityorder = 1;
	        var activitylist = []; 
	        $(this).find('ul li').each(function () {
	            activityid = $(this).find('input[name=activityid]').val();
	            var activitydata = {
	                'id': activityid,
                    'order': activityorder,
	            }
	            activitylist.push(activitydata);
	            activityorder = activityorder + 1;
	        });
	        var lessondata = {
	            'id': lessonid,
	            'order': lessonorder,
	            'activity': activitylist,
	        };
	        lessonlist.push(lessondata);
	        lessonorder = lessonorder + 1;
	    });
	    console.log(lessonlist);
	    $.post(
               url,
               {
                   'class': evalClass,
                   'method': 'saveActivityOrder',
                   'lessonlist': JSON.stringify(lessonlist),
               },
               function (result) {
                   
               }).error(function (xhr, status, error) {
                   alert('Error occur. Please contact the administrator.');
               });
	}
	this.loadAvailableTags = function(){
		var obj;
		$.ajax({
	                type: "POST",
	                url: url,
	                dataType: "json",
	                async: false,
	                data:{	class: evalClass,
							method: 'loadAvailableTags' },
	                success: function(result)
	                {
						$.each(result, function(ini,val){
							obj = { id : 1 , value: '#'+val.name};
							thisClass.availableTags.push(obj);
						});
						taglist = thisClass.availableTags;
	                },
	                error: function(response) {
						alert('Error occur. Please contact the administrator.');
	                }
                });
	}
	this.Search = function(ele,event)
	{
		if (event.keyCode == 13) {
		    var term = $('#txtSearch').val();
		    if (term == 'Search') term = '';
		    thisClass.getUnitlist(term);
		}
		else
			ele.onKeyPress=event.keyCode;
	}
	this.DisplayStage1 = function () {
	    currentstage = 1;
	    $('#new_unit_modal .modal-title').text('New Unit - Stage 1 - Desired Results');
	    $('#stage_one').show();
	    $('#stage_two').hide();
	    $('#stage_three').hide();
	    $('#stage2Btn').show();
	    $('#stage3Btn').hide();
	    $('#goStage1').addClass('hide');
	    $('#goStage2').addClass('hide');
	    $('#btnSave').show();
	}
	this.DisplayStage2 = function () {
	    currentstage = 2;
	    $('#new_unit_modal .modal-title').text('New Unit - Stage 2 - Assessment Evidence');
	    $('#stage_one').hide();
	    $('#stage_two').show();
	    $('#stage_three').hide();
	    $('#stage2Btn').hide();
	    $('#stage3Btn').show();
	    $('#goStage1').removeClass('hide');
	    $('#goStage2').addClass('hide');
	    $('#btnSave').hide();
	}
	this.DisplayStage3 = function () {
	    currentstage = 3;
	    $('#new_unit_modal .modal-title').text('New Unit - Stage 3 - Activity Creation');
	    $('#stage_one').hide();
	    $('#stage_two').hide();
	    $('#stage_three').show();
	    $('#stage2Btn').hide();
	    $('#stage3Btn').hide();
	    $('#goStage1').addClass('hide');
	    $('#goStage2').removeClass('hide');
	    $('#btnSave').show();
	}
	this.clearPerformanceValue = function () {
	    editcategory = '';
	    $("[id^='pfm_']").each(function () {
	        $(this).val('');
	    });
	    $("[id^='pfmi_']").each(function () {
	        $(this).val('0');
	    });
	    $('#pfm_rubric_name').removeAttr("disabled");
	    $('#pfm_rubric_assignment').removeAttr("disabled");
	    $('#impact_criteria_list li').remove();
	    $('#quality_criteria_list li').remove();
	    $('#content_criteria_list li').remove();
	    $('#process_criteria_list li').remove();
	    $('#pfm_add_impact_tag').parent().parent().find(".highlighter").html('');
	    $('#pfm_add_quality_tag').parent().parent().find(".highlighter").html('');
	    $('#pfm_add_content_tag').parent().parent().find(".highlighter").html('');
	    $('#pfm_add_process_tag').parent().parent().find(".highlighter").html('');
	}
	this.getAssignmentList = function () {
	    $.getJSON(
            url,
            {
                'class': evalClass,
                'method': 'getAssignmentList',
                'unitid': $("#ele_unitid").val(),
            },
            function (result) {
                var option = '';
                $("#pfm_rubric_assignment option").remove();
                option += '<option value="">New Assignment</option>';
                for (var i = 0; i < result.assignmentlist.length; i++) {
                    option += '<option value="' + result.assignmentlist[i].id + '">' + result.assignmentlist[i].name + '</option>';
                }
                $("#pfm_rubric_assignment").append(option);
            }).error(function (xhr, status, error) {
                alert('Error occur. Please contact the administrator.');
            });
	}
	this.getPerformanceData = function (id, type) {
	    var method = 'getAssignment';
	    thisClass.clearPerformanceValue();
	    if (id != '') {
	        $('#pfm_rubric_name').attr("disabled", true);
	        $('#pfm_rubric_assignment').attr("disabled", true);
	    }
	    if (type == 1) {
	        method = 'getPerformance'
	    }
	    else {
	        $('#pfm_rubric_assignment').removeAttr('disabled');
	    }
	    if (id != '') {
	        $.getJSON(
                url,
                {
                    'class': evalClass,
                    'method': method,
                    'id': id,
                },
                function (result) {
                    $.each(result, function (ini, val) {
                        if ((ini != 'impactlist') && (ini != 'qualitylist') && (ini != 'contentlist') && (ini != 'processlist')) {
                            $('#' + ini).val(val);
                        }
                        if ((ini == 'impactlist') || (ini == 'qualitylist') || (ini == 'contentlist') || (ini == 'processlist')) {
                            var tab;
                            if (ini == 'impactlist') {
                                tab = 1;
                            }
                            else if (ini == 'qualitylist') {
                                tab = 2;
                            }
                            else if (ini == 'contentlist') {
                                tab = 3;
                            }
                            else if (ini == 'processlist') {
                                tab = 4;
                            }
                            for (var i = 0; i < val.length; i++) {
                                var html = '<li class="well well-small">';
                                html += '<span class="pull-left" style="margin-top:5px;margin-bottom:0px;">' + val[i].criteria + '&nbsp;&#124;&nbsp;' + val[i].weight + '</span>';
                                html += '<button type="button" class="btn btn-danger btn-small pull-right" onclick="var event = new EDITTABLE();event.removecriteria(this);">Remove</button>';
                                html += '<button type="button" class="btn btn-default btn-small pull-right" onclick="var event = new EDITTABLE();event.editCriteria(this,' + tab + ');">Edit</button>';
                                html += '<input type="hidden" name="id" class="form-control input-small" value="' + val[i].id + '" />';
                                html += '<input type="hidden" name="name" class="form-control input-small" value="' + val[i].criteria + '" />';
                                html += '<input type="hidden" name="tag" class="form-control input-small" value="' + val[i].hashtag + '" />';
                                html += '<input type="hidden" name="weight" class="form-control input-small" value="' + val[i].weight + '" />';
                                html += '<div class="clearfix"></div>';
                                html += '</li>';
                                if (ini == 'impactlist') { $('#impact_criteria_list').append(html); }
                                if (ini == 'qualitylist') { $('#quality_criteria_list').append(html); }
                                if (ini == 'contentlist') { $('#content_criteria_list').append(html); }
                                if (ini == 'processlist') { $('#process_criteria_list').append(html); }
                            }
                        }
                    });
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
	    }
	}
	this.removecriteria = function (element) {
	    $(element).parent().remove();
	}
	this.clearCriteria = function () {
	    editcategory = '';
	    $('#pfm_add_impact_criteria').val('');
	    $('#pfm_add_impact_tag').val('');
	    $('#pfm_add_impact_weight').val('');
	    $('#pfm_add_quality_criteria').val('');
	    $('#pfm_add_quality_tag').val('');
	    $('#pfm_add_quality_weight').val('');
	    $('#pfm_add_content_criteria').val('');
	    $('#pfm_add_content_tag').val('');
	    $('#pfm_add_content_weight').val('');
	    $('#pfm_add_process_criteria').val('');
	    $('#pfm_add_process_tag').val('');
	    $('#pfm_add_process_weight').val('');
	    $('#pfm_add_impact_tag').parent().parent().find(".highlighter").html('');
	    $('#pfm_add_quality_tag').parent().parent().find(".highlighter").html('');
	    $('#pfm_add_content_tag').parent().parent().find(".highlighter").html('');
	    $('#pfm_add_process_tag').parent().parent().find(".highlighter").html('');
	}
	this.editCriteria = function (element, tab) {
	    $('#new_pt_details_modal .error').remove();
	    editcategory = $(element).parent();
	    var name = editcategory.find('input[name=name]').val();
	    var tag = editcategory.find('input[name=tag]').val();
	    var weight = editcategory.find('input[name=weight]').val();
	    if (tab == 1) {
	        $('#pfm_add_impact_criteria').val(name);
	        $('#pfm_add_impact_tag').val(tag);
	        $('#pfm_add_impact_weight').val(weight);
	        $("#pfm_add_impact_tag").hashtags({ refresh: true, autocompleteURL: taglist });

	    }
	    else if (tab == 2) {
	        $('#pfm_add_quality_criteria').val(name);
	        $('#pfm_add_quality_tag').val(tag);
	        $('#pfm_add_quality_weight').val(weight);
	        $("#pfm_add_quality_tag").hashtags({ refresh: true, autocompleteURL: taglist });
	    }
	    else if (tab == 3) {
	        $('#pfm_add_content_criteria').val(name);
	        $('#pfm_add_content_tag').val(tag);
	        $('#pfm_add_content_weight').val(weight);
	        $("#pfm_add_content_tag").hashtags({ refresh: true, autocompleteURL: taglist });
	    }
	    else if (tab == 4) {
	        $('#pfm_add_process_criteria').val(name);
	        $('#pfm_add_process_tag').val(tag);
	        $('#pfm_add_process_weight').val(weight);
	        $("#pfm_add_process_tag").hashtags({ refresh: true, autocompleteURL: taglist });
	    }
	}
	this.addImpactCriteria = function () {
	    var isduplicate = false;
	    $('#new_pt_details_modal .error').remove();
	    if ($('#pfm_add_impact_criteria').val() != '') {
	            $('#impact_criteria_list li').each(function () {
	                if ($('#pfm_add_impact_criteria').val() == $(this).find('input[name=name]').val()) {
	                    if (editcategory == '') {
	                        isduplicate = true;
	                    }
	                    else {
	                        if ((editcategory.find('input[name=id]').val() == '') || (editcategory.find('input[name=id]').val() != $(this).find('input[name=id]').val())) {
	                            isduplicate = true;
	                        }
	                    }
	                }
	            });
	        if (!isduplicate) {
	            if (editcategory != '') {
	                var name = $('#pfm_add_impact_criteria').val();
	                var tag = $('#pfm_add_impact_tag').val();
	                var weight = $('#pfm_add_impact_weight').val();
	                editcategory.find('span').html(name + '&nbsp;&#124;&nbsp;' + weight);
	                editcategory.find('input[name=name]').val(name);
	                editcategory.find('input[name=tag]').val(tag);
	                editcategory.find('input[name=weight]').val(weight);
	                editcategory = '';
	            }
	            else {
	                var html = '<li class="well well-small">';
	                html += '<span class="pull-left" style="margin-top:5px;margin-bottom:0px;">' + $('#pfm_add_impact_criteria').val() + '&nbsp;&#124;&nbsp;' + $('#pfm_add_impact_weight').val() + '</span>';
	                html += '<button type="button" class="btn btn-danger btn-small pull-right" onclick="var event = new EDITTABLE();event.removecriteria(this);">Remove</button>';
	                html += '<button type="button" class="btn btn-default btn-small pull-right"  onclick="var event = new EDITTABLE();event.editCriteria(this, 1);">Edit</button>';
	                html += '<input type="hidden" name="id" class="form-control input-small" value="" />';
	                html += '<input type="hidden" name="name" class="form-control input-small" value="' + $('#pfm_add_impact_criteria').val() + '" />';
	                html += '<input type="hidden" name="tag" class="form-control input-small" value="' + $('#pfm_add_impact_tag').val() + '" />';
	                html += '<input type="hidden" name="weight" class="form-control input-small" value="' + $('#pfm_add_impact_weight').val() + '" />';
	                html += '<div class="clearfix"></div>';
	                html += '</li>';
	                $('#impact_criteria_list').append(html);
	            }
	            $('#pfm_add_impact_criteria').val('');
	            $('#pfm_add_impact_tag').val('');
	            $('#pfm_add_impact_tag').parent().parent().find(".highlighter").html('');
	            $('#pfm_add_impact_weight').val('');
	        }
	        else {
	            $('<label class="error exist" for="ele_name">This Name have existed!!.</label>').insertAfter("#pfm_add_impact_criteria");
	        }
	    }
	}
	this.addQualityCriteria = function () {
	    var isduplicate = false;
	    $('#new_pt_details_modal .error').remove();
	    if ($('#pfm_add_quality_criteria').val() != '') {
	        if (editcategory == '') {
	            $('#quality_criteria_list li').each(function () {
	                if ($('#pfm_add_quality_criteria').val() == $(this).find('input[name=name]').val()) {
	                    if (editcategory == '') {
	                        isduplicate = true;
	                    }
	                    else {
	                        if ((editcategory.find('input[name=id]').val() == '') || (editcategory.find('input[name=id]').val() != $(this).find('input[name=id]').val())) {
	                            isduplicate = true;
	                        }
	                    }
	                }
	            });
	        }
	        if (!isduplicate) {
	            if (editcategory != '') {
	                var name = $('#pfm_add_quality_criteria').val();
	                var tag = $('#pfm_add_quality_tag').val();
	                var weight = $('#pfm_add_quality_weight').val();
	                editcategory.find('span').html(name + '&nbsp;&#124;&nbsp;' + weight);
	                editcategory.find('input[name=name]').val(name);
	                editcategory.find('input[name=tag]').val(tag);
	                editcategory.find('input[name=weight]').val(weight);
	                editcategory = '';
	            }
	            else {
	                var html = '<li class="well well-small">';
	                html += '<span class="pull-left" style="margin-top:5px;margin-bottom:0px;">' + $('#pfm_add_quality_criteria').val() + '&nbsp;&#124;&nbsp;' + $('#pfm_add_quality_weight').val() + '</span>';
	                html += '<button type="button" class="btn btn-danger btn-small pull-right" onclick="var event = new EDITTABLE();event.removecriteria(this);">Remove</button>';
	                html += '<button type="button" class="btn btn-default btn-small pull-right" onclick="var event = new EDITTABLE();event.editCriteria(this, 2);">Edit</button>';
	                html += '<input type="hidden" name="id" class="form-control input-small" value="" />';
	                html += '<input type="hidden" name="name" class="form-control input-small" value="' + $('#pfm_add_quality_criteria').val() + '" />';
	                html += '<input type="hidden" name="tag" class="form-control input-small" value="' + $('#pfm_add_quality_tag').val() + '" />';
	                html += '<input type="hidden" name="weight" class="form-control input-small" value="' + $('#pfm_add_quality_weight').val() + '" />';
	                html += '<div class="clearfix"></div>';
	                html += '</li>';
	                $('#quality_criteria_list').append(html);
	            }
	            $('#pfm_add_quality_criteria').val('');
	            $('#pfm_add_quality_tag').val('');
	            $('#pfm_add_quality_tag').parent().parent().find(".highlighter").html('');
	            $('#pfm_add_quality_weight').val('');
	        }
	        else {
	            $('<label class="error exist" for="ele_name">This Name have existed!!.</label>').insertAfter("#pfm_add_quality_criteria");
	        }
	    }
	}
	this.addContentCriteria = function () {
	    var isduplicate = false;
	    $('#new_pt_details_modal .error').remove();
	    if ($('#pfm_add_content_criteria').val() != '') {
	        if (editcategory == '') {
	            $('#content_criteria_list li').each(function () {
	                if ($('#pfm_add_content_criteria').val() == $(this).find('input[name=name]').val()) {
	                    if (editcategory == '') {
	                        isduplicate = true;
	                    }
	                    else {
	                        if ((editcategory.find('input[name=id]').val() == '') || (editcategory.find('input[name=id]').val() != $(this).find('input[name=id]').val())) {
	                            isduplicate = true;
	                        }
	                    }
	                }
	            });
	        }
	        if (!isduplicate) {
	            if (editcategory != '') {
	                var name = $('#pfm_add_content_criteria').val();
	                var tag = $('#pfm_add_content_tag').val();
	                var weight = $('#pfm_add_content_weight').val();
	                editcategory.find('span').html(name + '&nbsp;&#124;&nbsp;' + weight);
	                editcategory.find('input[name=name]').val(name);
	                editcategory.find('input[name=tag]').val(tag);
	                editcategory.find('input[name=weight]').val(weight);
	                editcategory = '';
	            }
	            else {
	                var html = '<li class="well well-small">';
	                html += '<span class="pull-left" style="margin-top:5px;margin-bottom:0px;">' + $('#pfm_add_content_criteria').val() + '&nbsp;&#124;&nbsp;' + $('#pfm_add_content_weight').val() + '</span>';
	                html += '<button type="button" class="btn btn-danger btn-small pull-right" onclick="var event = new EDITTABLE();event.removecriteria(this);">Remove</button>';
	                html += '<button type="button" class="btn btn-default btn-small pull-right" onclick="var event = new EDITTABLE();event.editCriteria(this, 3);">Edit</button>';
	                html += '<input type="hidden" name="id" class="form-control input-small" value="" />';
	                html += '<input type="hidden" name="name" class="form-control input-small" value="' + $('#pfm_add_content_criteria').val() + '" />';
	                html += '<input type="hidden" name="tag" class="form-control input-small" value="' + $('#pfm_add_content_tag').val() + '" />';
	                html += '<input type="hidden" name="weight" class="form-control input-small" value="' + $('#pfm_add_content_weight').val() + '" />';
	                html += '<div class="clearfix"></div>';
	                html += '</li>';
	                $('#content_criteria_list').append(html);
	            }
	            $('#pfm_add_content_criteria').val('');
	            $('#pfm_add_content_tag').val('');
	            $('#pfm_add_content_tag').parent().parent().find(".highlighter").html('');
	            $('#pfm_add_content_weight').val('');
	        }
	        else {
	            $('<label class="error exist" for="ele_name">This Name have existed!!.</label>').insertAfter("#pfm_add_content_criteria");
	        }
	    } 
	}
	this.addProcessCriteria = function () {
	    var isduplicate = false;
	    $('#new_pt_details_modal .error').remove();
	    if ($('#pfm_add_process_criteria').val() != '') {
	        if (editcategory == '') {
	            $('#process_criteria_list li').each(function () {
	                if ($('#pfm_add_process_criteria').val() == $(this).find('input[name=name]').val()) {
	                    if (editcategory == '') {
	                        isduplicate = true;
	                    }
	                    else {
	                        if ((editcategory.find('input[name=id]').val() == '') || (editcategory.find('input[name=id]').val() != $(this).find('input[name=id]').val())) {
	                            isduplicate = true;
	                        }
	                    }
	                }
	            });
	        }
	        if (!isduplicate) {
	            if (editcategory != '') {
	                var name = $('#pfm_add_process_criteria').val();
	                var tag = $('#pfm_add_process_tag').val();
	                var weight = $('#pfm_add_process_weight').val();
	                editcategory.find('span').html(name + '&nbsp;&#124;&nbsp;' + weight);
	                editcategory.find('input[name=name]').val(name);
	                editcategory.find('input[name=tag]').val(tag);
	                editcategory.find('input[name=weight]').val(weight);
	                editcategory = '';
	            }
	            else {
	                var html = '<li class="well well-small">';
	                html += '<span class="pull-left" style="margin-top:5px;margin-bottom:0px;">' + $('#pfm_add_process_criteria').val() + '&nbsp;&#124;&nbsp;' + $('#pfm_add_process_weight').val() + '</span>';
	                html += '<button type="button" class="btn btn-danger btn-small pull-right" onclick="var event = new EDITTABLE();event.removecriteria(this);">Remove</button>';
	                html += '<button type="button" class="btn btn-default btn-small pull-right" onclick="var event = new EDITTABLE();event.editCriteria(this, 4);">Edit</button>';
	                html += '<input type="hidden" name="id" class="form-control input-small" value="" />';
	                html += '<input type="hidden" name="name" class="form-control input-small" value="' + $('#pfm_add_process_criteria').val() + '" />';
	                html += '<input type="hidden" name="tag" class="form-control input-small" value="' + $('#pfm_add_process_tag').val() + '" />';
	                html += '<input type="hidden" name="weight" class="form-control input-small" value="' + $('#pfm_add_process_weight').val() + '" />';
	                html += '<div class="clearfix"></div>';
	                html += '</li>';
	                $('#process_criteria_list').append(html);
	            }
	            $('#pfm_add_process_criteria').val('');
	            $('#pfm_add_process_tag').val('');
	            $('#pfm_add_process_tag').parent().parent().find(".highlighter").html('');
	            $('#pfm_add_process_weight').val('');
	        }
	        else {
	            $('<label class="error exist" for="ele_name">This Name have existed!!.</label>').insertAfter("#pfm_add_process_criteria");
	        }
	    }
	}
	this.savePerformance = function () {
	    var impact_criteria_list = [];
	    var quality_criteria_list = [];
	    var content_criteria_list = [];
	    var process_criteria_list = [];
	    $('#impact_criteria_list li').each(function () {
	        var data = {
	            'id': $(this).find('input[name=id]').val(),
	            'criteria': $(this).find('input[name=name]').val(),
	            'tag': $(this).find('input[name=tag]').val(),
	            'weight': $(this).find('input[name=weight]').val(),
	        };
	        impact_criteria_list.push(data);
	    });
	    $('#quality_criteria_list li').each(function () {
	        var data = {
	            'id': $(this).find('input[name=id]').val(),
	            'criteria': $(this).find('input[name=name]').val(),
	            'tag': $(this).find('input[name=tag]').val(),
	            'weight': $(this).find('input[name=weight]').val(),
	        };
	        quality_criteria_list.push(data);
        });
	    $('#content_criteria_list li').each(function () {
	        var data = {
	            'id': $(this).find('input[name=id]').val(),
	            'criteria': $(this).find('input[name=name]').val(),
	            'tag': $(this).find('input[name=tag]').val(),
	            'weight': $(this).find('input[name=weight]').val(),
	        };
	        content_criteria_list.push(data);
        });
	    $('#process_criteria_list li').each(function () {
	        var data = {
	            'id': $(this).find('input[name=id]').val(),
	            'criteria': $(this).find('input[name=name]').val(),
	            'tag': $(this).find('input[name=tag]').val(),
	            'weight': $(this).find('input[name=weight]').val(),
	        };
	        process_criteria_list.push(data);
	    });
	    var recid = $('#pfm_rubric_id').val();
	    $('#new_pt_details_modal .error').remove();
	    if ($('#pfm_rubric_name').val() != '') {
	        if (recid == '') {
	            $.post(
                url,
                {
                    'class': evalClass,
                    'method': 'addPerformance',
                    'unitid': $("#ele_unitid").val(),
                    'name': $('#pfm_rubric_name').val(),
                    'assignment': $('#pfm_rubric_assignment').val(),
                    'goal-of-task': $('#pfm_rubric_goal').val(),
                    'audience': $('#pfm_rubric_audience').val(),
                    'context': $('#pfm_rubric_context').val(),
                    'minwords': $('#pfm_rubric_parameters_min').val(),
                    'maxwords': $('#pfm_rubric_parameters_max').val(),
                    'revisions': $('#pfm_rubric_revisions').val(),
                    'maxscale': $('#pfm_rubric_scale').val(),
                    'impact_weight': $('#pfmi_impact_weight_input').val(),
                    'quality_weight': $('#pfmi_quality_weight_input').val(),
                    'content_weight': $('#pfmi_content_weight_input').val(),
                    'process_weight': $('#pfmi_process_weight_input').val(),
                    'impact_criteria': JSON.stringify(impact_criteria_list),
                    'quality_criteria': JSON.stringify(quality_criteria_list),
                    'content_criteria': JSON.stringify(content_criteria_list),
                    'process_criteria': JSON.stringify(process_criteria_list),
                },
                function (result) {
                    if (result.status == 'duplicate') {
                        $('<label class="error exist" for="ele_name">This Name have existed!!.</label>').insertAfter("#pfm_rubric_name");
                    }
                    else {
                        thisClass.editTable($("#ele_unitid").val());
                        $('#new_pt_details_modal').modal('hide');
                    }
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
	        }
	        else {
	            $.post(
                url,
                {
                    'class': evalClass,
                    'method': 'savePerformance',
                    'unitassignmentid': recid,
                    'goal-of-task': $('#pfm_rubric_goal').val(),
                    'audience': $('#pfm_rubric_audience').val(),
                    'context': $('#pfm_rubric_context').val(),
                    'minwords': $('#pfm_rubric_parameters_min').val(),
                    'maxwords': $('#pfm_rubric_parameters_max').val(),
                    'revisions': $('#pfm_rubric_revisions').val(),
                    'maxscale': $('#pfm_rubric_scale').val(),
                    'impact_weight': $('#pfmi_impact_weight_input').val(),
                    'quality_weight': $('#pfmi_quality_weight_input').val(),
                    'content_weight': $('#pfmi_content_weight_input').val(),
                    'process_weight': $('#pfmi_process_weight_input').val(),
                    'impact_criteria': JSON.stringify(impact_criteria_list),
                    'quality_criteria': JSON.stringify(quality_criteria_list),
                    'content_criteria': JSON.stringify(content_criteria_list),
                    'process_criteria': JSON.stringify(process_criteria_list),
                },
                function (result) {
                    $('#new_pt_details_modal').modal('hide');
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
	        }
	    }
	}
	this.clearEvidenceValue = function () {
	    $("[id^='evd_']").each(function () {
	        $(this).val('');
	    });

	    $('#evd_evidence_performance_name').removeAttr("disabled");
	    $('#impact_list li').remove();
	    $('#quality_list li').remove();
	    $('#content_list li').remove();
	    $('#process_list li').remove();
	}
	this.getEvidenceData = function (id, type) {
	    var method = 'getRubricCategory';
	    if (type == 1) {
	        method = 'getEvidence'
	        thisClass.clearEvidenceValue();
	        $('#evd_evidence_performance_name').attr("disabled", true);
	    }
	    else {
	        $('#evd_evidence_performance_name').removeAttr('disabled');
	        $('#impact_list li').remove();
	        $('#quality_list li').remove();
	        $('#content_list li').remove();
	        $('#process_list li').remove();
	    }
	    if (id != '') {
	        $.getJSON(
                url,
                {
                    'class': evalClass,
                    'method': method,
                    'id': id,
                },
                function (result) {
                    $.each(result, function (ini, val) {
                        if ((ini != 'impactlist') && (ini != 'qualitylist') && (ini != 'contentlist') && (ini != 'processlist') && (ini != 'impactselectlist') && (ini != 'qualityselectlist') && (ini != 'contentselectlist') && (ini != 'processselectlist')) {
                            $('#' + ini).val(val);
                        }
                        if ((ini == 'impactlist') || (ini == 'qualitylist') || (ini == 'contentlist') || (ini == 'processlist')) {
                            for (var i = 0; i < val.length; i++) {
                                var html = '<li>';
                                html += '<label for="impact_criteria"><input type="checkbox" name="' + val[i].id + '" /> ' + val[i].criteria + '</label>';
                                html += '</li>';
                                if (ini == 'impactlist') { $('#impact_list').append(html); }
                                if (ini == 'qualitylist') { $('#quality_list').append(html); }
                                if (ini == 'contentlist') { $('#content_list').append(html); }
                                if (ini == 'processlist') { $('#process_list').append(html); }
                            }
                        }
                        if (ini == 'impactselectlist') {
                            for (var i = 0; i < val.length; i++) {
                                $('#impact_list input[name=' + val[i].criteriaid + ']').attr("checked", true);
                            }
                        }
                        if (ini == 'qualityselectlist') {
                            for (var i = 0; i < val.length; i++) {
                                $('#quality_list input[name=' + val[i].criteriaid + ']').attr("checked", true);
                            }
                        }
                        if (ini == 'contentselectlist') {
                            for (var i = 0; i < val.length; i++) {
                                $('#content_list input[name=' + val[i].criteriaid + ']').attr("checked", true);
                            }
                        }
                        if (ini == 'processselectlist') {
                            for (var i = 0; i < val.length; i++) {
                                $('#process_list input[name=' + val[i].criteriaid + ']').attr("checked", true);
                            }
                        }
                    });
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
	    }
	}
	this.saveEvidence = function () {
	    var impact_criteria_list = [];
	    var quality_criteria_list = [];
	    var content_criteria_list = [];
	    var process_criteria_list = [];
	    $('#impact_list li input:checked').each(function () {
	        var data = {
	            'id': $(this).attr('name'),
	        };
	        impact_criteria_list.push(data);
	    });
	    $('#quality_list li input:checked').each(function () {
	        var data = {
	            'id': $(this).attr('name'),
	        };
	        quality_criteria_list.push(data);
	    });
	    $('#content_list li input:checked').each(function () {
	        var data = {
	            'id': $(this).attr('name'),
	        };
	        content_criteria_list.push(data);
	    });
	    $('#process_list li input:checked').each(function () {
	        var data = {
	            'id': $(this).attr('name'),
	        };
	        process_criteria_list.push(data);
	    });
	    var recid = $('#evd_evidence_id').val();
	    $('#new_evidence_details_modal .error').remove();
	    if ($('#evd_evidence_name').val() != '') {
	        if (recid == '') {
	            $.post(
                url,
                {
                    'class': evalClass,
                    'method': 'addEvidence',
                    'unitid': $("#ele_unitid").val(),
                    'unitassignmentid': $('#evd_evidence_performance_name').val(),
                    'name': $('#evd_evidence_name').val(),
                    'goal': $('#evd_evidence_goal').val(),
                    'deliverable': $('#evd_evidence_deliverables').val(),
                    'impact_criteria': JSON.stringify(impact_criteria_list),
                    'quality_criteria': JSON.stringify(quality_criteria_list),
                    'content_criteria': JSON.stringify(content_criteria_list),
                    'process_criteria': JSON.stringify(process_criteria_list),
                },
                function (result) {
                    if (result.status == 'duplicate') {
                        $('<label class="error exist" for="evd_evidence_name">This Name have existed!!.</label>').insertAfter("#evd_evidence_name");
                    }
                    else {
                        thisClass.editTable($("#ele_unitid").val());
                        $('#new_evidence_details_modal').modal('hide');
                    }
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
	        }
	        else {
	            $.post(
                url,
                {
                    'class': evalClass,
                    'method': 'saveEvidence',
                    'unitlessonlnkid': recid,
                    'unitassignmentid': $('#evd_evidence_performance_name').val(),
                    'name': $('#evd_evidence_name').val(),
                    'goal': $('#evd_evidence_goal').val(),
                    'deliverable': $('#evd_evidence_deliverables').val(),
                    'impact_criteria': JSON.stringify(impact_criteria_list),
                    'quality_criteria': JSON.stringify(quality_criteria_list),
                    'content_criteria': JSON.stringify(content_criteria_list),
                    'process_criteria': JSON.stringify(process_criteria_list),
                },
                function (result) {
                    $('#new_evidence_details_modal').modal('hide');
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
	        }
	    }
	}
	this.iniControl = function () {
	    $('form').submit(function (e) {
	        e.preventDefault();
	    });
	    Watermark('txtSearch', 'Search', 'noclass');
	    thisClass.getUnitlist('');
		$('#txtSearch').keypress(function(event) {
			thisClass.Search(this,event);
		});
	    $('#btnSearch').click(function () {
	        var term = $('#txtSearch').val();
	        if (term == 'Search') term = '';
	        thisClass.getUnitlist(term);
	    });
	    thisClass.loadAvailableTags();
        $("#ele_establishedgoal").hashtags({ autocompleteURL:thisClass.availableTags });
		$("#ele_essentialquestion").hashtags({ autocompleteURL:thisClass.availableTags });
		$("#ele_understanding").hashtags({ autocompleteURL:thisClass.availableTags });
		$("#ele_knowledge").hashtags({ autocompleteURL:thisClass.availableTags });
		$("#ele_skill").hashtags({ autocompleteURL: thisClass.availableTags });
		$("#pfm_add_impact_tag").hashtags({ autocompleteURL: thisClass.availableTags });
		$("#pfm_add_quality_tag").hashtags({ autocompleteURL: thisClass.availableTags });
		$("#pfm_add_content_tag").hashtags({ autocompleteURL: thisClass.availableTags });
		$("#pfm_add_process_tag").hashtags({ autocompleteURL: thisClass.availableTags });
		$("#new_unit_btn").click(function () {
		    $('.error').remove();
		    currentstage = 1;
		    $('#accordion').find('.in').removeClass('in').addClass('collapse').css('height', '0px');
		    $('#collapseName').removeClass('collapse').addClass('in').css('height', 'auto');
	        thisClass.DisplayStage1();
			$("[id^='ele_']").each(function(){
			    $(this).val('');
			    $(this).parent().parent().find(".highlighter").html('');
			});
			$('#performancebtngrp').remove();
			$('#performancebtnclr').remove();
		});
		$("#btnSave").click(function () {
		    if (currentstage == 1) {
		        thisClass.savestage1(false);
		    }
		    else if (currentstage == 3) {
		        thisClass.savestage3();
		    }
		});
		$('#stage2Btn').click(function () {
		    thisClass.savestage1(true);
	    });
	    $('#stage3Btn').click(function () {
	        thisClass.DisplayStage3();
	    });
	    $('#goStage1').attr('href', 'javascript:var event = new EDITTABLE();event.DisplayStage1();');
	    $('#goStage2').attr('href', 'javascript:var event = new EDITTABLE();event.DisplayStage2();');
	    $('#btnAddPerformance').click(function () {
	        thisClass.clearPerformanceValue();
	    });
	    $('#new_pt_details_modal').on('show.bs.modal', function (e) {
	        $('#criteria_tabs a:first').tab('show');
	        $('.rubric-categories').removeClass('hide');
	        $('.criteria-section').addClass('hide');
	        $('#show-category-btn').removeClass('hide');
	        $('#show_rubric_btn').addClass('hide');
	        $('#new_pt_details_modal .error').remove();
	        thisClass.getAssignmentList();
	    });
	    $('#show-category-btn').click(function () {
	        $('.rubric-categories').addClass('hide');
	        $('.criteria-section').removeClass('hide');
	        $('#show_rubric_btn').removeClass('hide');
	        $('#impactCollapse').removeClass('hide').addClass('active');
	        $(this).addClass('hide');
	    });
	    $('#show_rubric_btn').click(function () {
	    	$(this).addClass('hide');
	    	$('.rubric-categories').removeClass('hide');
	    	$('.criteria-section').addClass('hide');
	    	$('#show-category-btn').removeClass('hide');
	    });
	    $('#pfmi_impact_weight_input').change(function(){
	        var val = $('#pfmi_impact_weight_input').val();
	        $('#pfmi_impact_percent').val(val);
	    });
	    $('.rubric-impact').click(function () {	
	    	$('.rubric-categories').addClass('hide');
	    	$('#impactCollapse').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('.criteria-section').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('#processCollapse, #qualityCollapse, #contentCollapse').removeClass('active');
	    	$('#impactCollapse').addClass('active');
	    	$('#show-category-btn').addClass('hide');
	    });
	    $('#pfmi_quality_weight_input').change(function(){
	    	var val = $('#pfmi_quality_weight_input').val();
	    	$('#pfmi_quality_percent').val(val);
	    });
	    $('.rubric-quality').click(function () {
	    	$('.rubric-categories').addClass('hide');
	    	$('#qualityCollapse').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('.criteria-section').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('#impactCollapse, #processCollapse, #contentCollapse').removeClass('active');
	    	$('#qualityCollapse').addClass('active');
	    	$('#show-category-btn').addClass('hide');
	    });
	    $('#pfmi_content_weight_input').change(function(){
	    	var val = $('#pfmi_content_weight_input').val();
	    	$('#pfmi_content_percent').val(val);
	    });
	    $('.rubric-content').click(function () {
	    	$('.rubric-categories').addClass('hide');
	    	$('#contentCollapse').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('.criteria-section').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('#impactCollapse, #qualityCollapse, #processCollapse').removeClass('active');
	    	$('#contentCollapse').addClass('active');
	    	$('#show-category-btn').addClass('hide');
	    });
	    $('#pfmi_process_weight_input').change(function(){
	    	var val = $('#pfmi_process_weight_input').val();
	    	$('#pfmi_process_percent').val(val);
	    });
	    $('.rubric-process').click(function () {
	    	$('.rubric-categories').addClass('hide');
	    	$('#processCollapse').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('.criteria-section').removeClass('hide');
	    	$('#show_rubric_btn').removeClass('hide');
	    	$('#impactCollapse, #qualityCollapse, #contentCollapse').removeClass('active');
	    	$('#processCollapse').addClass('active');
	    	$('#show-category-btn').addClass('hide');
	    });
	    $('a[data-toggle="tab"]').on('show.bs.tab', function (e) {
	        var prevtab = e.relatedTarget;
	        if (prevtab != null) {
	            var paneid = $(prevtab).attr('href');
	            var hasvalue = false;
	            $(paneid).find("[id^='pfm_']").each(function () {
	                if ($(this).val() != '') {
	                    hasvalue = true;
	                }
	            });
	            if (hasvalue) {
	                var discard = confirm('Discard All Changes?');
	                if (!discard) {
	                    e.preventDefault();
	                }
	            }
	        }
	    });
	    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
	        thisClass.clearCriteria();
	    })
	    $('#add_impact_criteria_btn').click(function () {
	        thisClass.addImpactCriteria();
	    });
	    $('#add_quality_criteria_btn').click(function () {
	        thisClass.addQualityCriteria();
	    }); 
	    $('#add_content_criteria_btn').click(function () {
	        thisClass.addContentCriteria();
	    });
	    $('#add_process_criteria_btn').click(function () {
	        thisClass.addProcessCriteria();
	    }); 
	    $('#pfm_rubric_assignment').change(function () {
	        thisClass.getPerformanceData($('#pfm_rubric_assignment').val(),0);
	    });
	    $('#btnSavePerformance').click(function () {
	        thisClass.savePerformance();
	    });
	    $('#btnAddEvidence').click(function () {
	        thisClass.clearEvidenceValue();
	    });
	    $('#new_evidence_details_modal').on('show.bs.modal', function (e) {
	        $('#evidencecategorytab a:first').tab('show');
	        $('#new_evidence_details_modal .error').remove();
	    })
	    $('#evd_evidence_performance_name').change(function () {
	        thisClass.getEvidenceData($('#evd_evidence_performance_name').val(), 0);
	    });
	    $('#btnSaveEvidence').click(function () {
	        thisClass.saveEvidence();
	    });
	    $("#sortable").sortable();
	    $('#impact_criteria_list').sortable();
	    $('#quality_criteria_list').sortable();
	    $('#content_criteria_list').sortable();
	    $('#process_criteria_list').sortable();
		var profile = new EDITPROFILE(url);
		profile.iniControl();
	}
}
$(function() {
	var gen = new EDITTABLE();
	gen.iniControl();
});
</script>
</head>
<body>
	{% include "tsweb/main/navbar.html" %}
	<div class="page-container">
		{% include "tsweb/main/sidepanel.html" %}
		<div class="block-cell block-wide">
			<div id="list"></div>
			<button id="new_unit_btn" class="btn btn-info btn-lg new-btn" data-toggle="modal" data-target="#new_unit_modal">
			  New Unit <i class="fa fa-plus"></i>
			</button>
		</div> <!--End Block Cell-->
	</div> <!-- End page container -->
	<!--New Class Modal Form--> 
	<div class="modal fade modal-wide" id="new_unit_modal" tabindex="-1" role="dialog" aria-labelledby="newUnitLabel" aria-hidden="true" data-dismiss="false" style="background-color: rgba(20, 20, 20, .75);">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header teacher-header">
	        <button id="btnXClose" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	        <button type="button" class="btn btn-default btn-small btn-edit pull-right hide" id="editClassBtn">Edit</button>
	        <h4 class="modal-title">New Unit - Stage 1 - Desired Results</h4>
	      </div>
	      <div class="modal-body">
	        <form role="form" class="form form-horizontal" id="new_unit_form">
			<div id="unitexistalert" class="alert" style="display: none"> 
			    <a class="close" onclick="$('.alert').hide()">×</a>  
			    <strong>Warning!</strong> This Unit have exist data !!!
			</div>
	        	<div class="row">
		        	<div class="col-lg-12" id="stage_one">
			        	<div class="panel-group" id="accordion">
			        		
			        		<div class="panel panel-default">
			        		  <div class="panel-heading">
			        		    <h4 class="panel-title">
			        		      <a data-toggle="collapse" data-parent="#accordion" href="#collapseName">
			        		        Name:
			        		      </a>
			        		    </h4>
			        		  </div>
			        		  <div id="collapseName" class="panel-collapse collapse in">
			        		    <div class="panel-body">
		        		    		<input type="hidden" name="id" class="form-control input-small" id="ele_unitid"/>	
			        		      	<input type="text" name="name" class="form-control input-small" id="ele_name" required/>			        		      
			        		    </div>
			        		  </div>
			        		</div>
			        		<div class="panel panel-default">
			        		  <div class="panel-heading">
			        		    <h4 class="panel-title">
			        		      <a data-toggle="collapse" data-parent="#accordion" href="#collapseDesc">
			        		        Description:
			        		      </a>
			        		    </h4>
			        		  </div>
			        		  <div id="collapseDesc" class="panel-collapse collapse">
			        		    <div class="panel-body">
			        		      <input type="text" name="description" class="form-control input-small" id="ele_description"/>			        		      
			        		    </div>
			        		  </div>
			        		</div>
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" class="genTag" data-parent="#accordion" href="#collapseOne">
			        	          Established Goal(s):
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseOne" class="panel-collapse collapse">
			        	      <div class="panel-body">
				        	      <textarea name="establishedgoal" class="form-control input-small" id="ele_establishedgoal" data-provide="typeahead"></textarea>
			        	      </div>
			        	    </div>
			        	  </div>
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
			        	          Understanding(s):
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseTwo" class="panel-collapse collapse">
			        	      <div class="panel-body">
		        	          <textarea name="understanding" class="form-control input-small" id="ele_understanding"></textarea>
			        	      </div>
			        	    </div>
			        	  </div>
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
			        	          Essential Question(s):
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseThree" class="panel-collapse collapse">
			        	      <div class="panel-body">
		        	          <textarea name="essentialquestion" class="form-control input-small" id="ele_essentialquestion"></textarea>
			        	      </div>
			        	    </div>
			        	  </div>
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
			        	          Students will know...
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseFour" class="panel-collapse collapse">
			        	      <div class="panel-body">
		        	          <textarea name="knowledge" class="form-control input-small" id="ele_knowledge"></textarea>
			        	      </div>
			        	    </div>
			        	  </div>
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">
			        	          Students will be able to...
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseFive" class="panel-collapse collapse">
			        	      <div class="panel-body">
		        	          <textarea name="skill" class="form-control input-small" id="ele_skill"></textarea>
			        	      </div>
			        	    </div>
			        	  </div>
			        	  
			        	</div>
			        </div> <!-- /.col-lg-12 --> 
			        <div class="col-lg-12" id="stage_two" style="display: none;">
			        	<div class="panel-group" id="accordion_two">
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" data-parent="#accordion_two" href="#collapseSix">
			        	          Performance Task(s):
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseSix" class="panel-collapse collapse in">
			        	      <div class="panel-body">
                                  <button type="button" class="btn btn-info btn-small pull-right" role="button" id="btnAddPerformance" data-toggle="modal" data-target="#new_pt_details_modal"><i class="fa fa-plus" ></i></button>
			        	      </div>
			        	    </div>
			        	  </div>
			        	  <div class="panel panel-default">
			        	    <div class="panel-heading">
			        	      <h4 class="panel-title">
			        	        <a data-toggle="collapse" data-parent="#accordion_two" href="#collapseSeven">
			        	          Other Evidence:
			        	        </a>
			        	      </h4>
			        	    </div>
			        	    <div id="collapseSeven" class="panel-collapse collapse">
			        	      <div class="panel-body">
			        	        <button type="button" class="btn btn-info btn-small pull-right" role="button" id="btnAddEvidence" data-toggle="modal" data-target="#new_evidence_details_modal"><i class="fa fa-plus"></i></button>
			        	      </div>
			        	    </div>
			        	  </div>
			        	</div>
			        </div> <!-- /.col-lg-12 STAGE TWO-->
			        <div class="col-lg-12" id="stage_three" style="display: none;">
			        	<p class="text-muted">You may reorder your activities &amp; lessons by clicking an dragging to the position most desirable</p>
			        	<p class="text-muted">The Auto - Manual switch controls the grading type for each activity</p>
			        	<ul id="sortable" class="panel-group">
			        	</ul> <!-- #sortable -->
			        </div> <!-- /.col-lg-12 STAGE THREE -->
		        </div> <!-- /.row -->
                <div class="modal-footer">
	                <input type="reset" id="closeBtn" data-dismiss="modal" class="btn btn-default" value="Close" />
	                <a href="#" id="goStage1" class="btn btn-default hide"><i class="fa fa-arrow-left"></i> Stage 1</a>
	                <a href="#" id="goStage2" class="btn btn-default hide"><i class="fa fa-arrow-left"></i> Stage 2</a>
	                <input type="submit" id="btnSave" class="btn btn-primary" value="Save Unit" />
	                <input type="submit" id="stage2Btn" class="btn btn-success" value="Go to stage 2 "/>
	                <input type="button" id="stage3Btn" class="btn btn-success" value="Go to stage 3"/>
	          </div><!-- /.modal-footer -->
	        </form>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->	
	<!--New Performance Task Details Modal Form--> 
		<div class="modal fade modal-wide" id="new_pt_details_modal" tabindex="-1" role="dialog" aria-labelledby="newPTLabel" aria-hidden="true" data-dismiss="false">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header teacher-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Performance Task Details</h4>
		      </div>
		      <div class="modal-body">
		        <form role="form" class="form-horizontal" id="new_rubric_form">
		        	<!--Create rubric here-->
		        	<div class="row">
		        		<div class="col-lg-5">
			        		<div class="form-group">
			        			<label for="pfm_rubric_name" class="col-sm-4 control-label">Name</label>
			        			<div class="col-sm-8">
                                    <input type="hidden" name="pfm_rubric_id" class="form-control input-small" id="pfm_rubric_id"/>	
				        			<input type="text" name="pfm_rubric_name" id="pfm_rubric_name" class="form-control input-small" required/>
				        		</div>
			        		</div>
			        		<div class="form-group">
			        			<label for="pfm_rubric_assignment" class="control-label col-sm-4">Assignment</label>
				        		<div class="col-sm-8">
				        			<select class="form-control input-small" id="pfm_rubric_assignment">
                                        <option value="">New Assignment</option>
                                        {% for row in assignmentlist %}
				                            <option value="{{ row.id }}">{{ row.name }}</option>
				                        {% endfor %}
				        			</select>
				        		</div>
			        		</div>
				        	<div class="form-group">
				        		<label for="pfm_rubric_goal" class="control-label col-sm-4">Goal Of Task</label>
				        		<div class="col-sm-8">
					        		<input type="text" name="pfm_rubric_goal" id="pfm_rubric_goal" class="form-control input-small" />
					        	</div>
				        	</div>
				        	<div class="form-group">
				        		<label for="pfm_rubric_audience" class="control-label col-sm-4">Audience</label>
				        		<div class="col-sm-8">
					        		<input type="text" name="pfm_rubric_audience" id="pfm_rubric_audience" class="form-control input-small" />
					        	</div>
				        	</div>
				        	<div class="form-group">
				        		<label for="pfm_rubric_context" class="control-label col-sm-4">Context/Situation</label>
				        		<div class="col-sm-8">
					        		<input type="text" name="pfm_rubric_context" id="pfm_rubric_context" class="form-control input-small" />
					        	</div>
				        	</div>
				        	<div class="form-group">
				        		<label for="rubric_parameters" class="control-label col-sm-4">Parameters</label>
				        		<div class="col-sm-4">
					        		<input type="number" name="pfm_rubric_parameters_min" id="pfm_rubric_parameters_min" class="form-control input-small" placeholder="Min" />
					        	</div>
					        	<div class="col-sm-4">
					        		<input type="number" name="pfm_rubric_parameters_max" id="pfm_rubric_parameters_max" class="form-control input-small" placeholder="Max" />
					        	</div>
				        	</div>
				        	<div class="form-group">
				        		<label for="pfm_rubric_revisions" class="control-label col-sm-4">Revisions</label>
				        		<div class="col-sm-8">
				        			<input type="number" name="pfm_rubric_revisions" id="pfm_rubric_revisions" class="form-control input-small" />
				        		</div>
				        	</div>
				        	<div class="form-group">
				        		<label for="pfm_rubric_scale" class="control-label col-sm-4">Scale</label>
				        		<div class="col-sm-8">
					        		<input type="number" min="1" max="100" name="pfm_rubric_scale" id="pfm_rubric_scale" class="form-control input-small" placeholder="1 - 100"/>
					        	</div>
				        	</div>
				        </div><!-- col-lg-5 -->
		        		<div class="col-lg-7" style="padding-left: 70px;">
		        			<button type="button" role="button" class="btn btn-small btn-default pull-right" id="show-category-btn">Show Categories</button>
			        		<div class="rubric-categories">
			        		<div class="rubric-impact circle circle-blue center-block">
			        			<p>Impact</p>
			        			<div class="weight-percent"><input id="pfmi_impact_percent" type="number" max="100" step="1" name="impact-percent" class="circle-input" value="0" disabled />%</div>
			        		</div>
			        		<div class="rubric-quality circle circle-green">
			        			<p>Quality</p>
			        			<div class="weight-percent"><input id="pfmi_quality_percent" type="number" max="100" step="1" name="quality-percent" class="circle-input" value="0" disabled />%</div>
			        		</div>
			        		<div class="rubric-objective circle circle-grey">
			        			<div>Objective</div>
			        		</div>
			        		<div class="rubric-content circle circle-purple">
			        			<p>Content</p>
			        			<div class="weight-percent"><input id="pfmi_content_percent" max="100" step="1" type="number" name="content-percent" class="circle-input" value="0" disabled />%</div>
			        		</div>
			        		<div class="rubric-process circle circle-red">
			        			<p>Process</p>
			        			<div class="weight-percent"><input id="pfmi_process_percent" max="100" step="1" type="number" name="process-percent" class="circle-input" value="0" disabled />%</div>
			        		</div>
			        	</div>
			        </div><!-- col-lg-7 -->
	        		<div class="col-lg-7">		        		
  		      		<button id="show_rubric_btn" type="button" role="button" class="btn btn-small btn-default pull-right hide">Show Rubric</button>
  		      		<div class="criteria-section hide">	
  		        		<ul class="nav nav-tabs nav-justified" id="criteria_tabs">
  		        		  <li><a href="#impactCollapse" data-toggle="tab">Impact</a></li>
  		        		  <li><a href="#qualityCollapse" data-toggle="tab">Quality</a></li>
  		        		  <li><a href="#contentCollapse" data-toggle="tab">Content</a></li>
  		        		  <li><a href="#processCollapse" data-toggle="tab">Process</a></li>
  		        		</ul>
  		      			<br />
  		      			<div class="tab-content">		        				     
  		  				    <div id="impactCollapse" class="tab-pane">
  		  				    	<div class="form-group">
  						    			<label class="control-label col-sm-4">Category Weight</label>
  						    			<div class="col-sm-2">
  		  				    			<input class="form-control input-small" type="number" id="pfmi_impact_weight_input" value="0" min="0" max="100"/>
  		  				    		</div>
  		  				    		<div class="col-sm-2">
  		  				    			<input type="button" class="btn btn-blue" value="+" id="add_impact_criteria_btn"/>
  		  				    		</div>
  		  				    	</div>
  		  				      <div class="panel-body rubric-criteria-panel">
  		  				      	<div class="alert alert-danger alertCriteria" style="display: none;">Please enter text.</div>
  		    				      <input type="text" name="pfm_add_impact_criteria" id="pfm_add_impact_criteria" class="form-control input-small" placeholder="Add Impact Criteria"/>
  		    				      <div class="row">
  		    				      	<div class="col-lg-6">
  				    				      <!--<input type="text" name="add-impact-tag" placeholder="Add Tag" id="pfm_add_impact_tag" class="form-control input-small add-tag" />-->
                                        <textarea name="add-impact-tag" placeholder="Add Tag" id="pfm_add_impact_tag" class="form-control input-small add-tag"></textarea>
  			    				      </div>
  			    				      <div class="col-lg-6">
  				    				      <input type="number" min="1" max="100" name="add-impact-weight" value="" id="pfm_add_impact_weight" class="form-control input-small add-tag" placeholder="Weight 1 - 100" />
  				    				    </div>
  		    				      </div>
  		    				      <hr />
  		  				      	<div class="impact-list-item">
  		  				      		<p class="text-muted">Click and drag to reorder criteria</p>
  		    				      	<ul class="list-unstyled" id="impact_criteria_list">
  		    				      	</ul>
  		  				      	</div>
  		  				      </div>
  		  				     </div>
  		  				     <div id="qualityCollapse" class="tab-pane">
  		    				    	<div class="form-group">
  		    				    		<label for="" class="control-label col-sm-4">Category Weight</label>
  		    				    		<div class="col-sm-2">
  		    				    			<input class="form-control input-small" type="number" id="pfmi_quality_weight_input" value="0" min="0" max="100"/>
  		    				    		</div>
  		    				    		<div class="col-sm-2">
  		    				    			<input type="button" class="btn btn-green" value="+" id="add_quality_criteria_btn"/>
  		    				    		</div>
  		    				    	</div>
  		    				      <div class="panel-body rubric-criteria-panel">
  		      				      <div class="alert alert-danger alertCriteria" style="display: none;">Please enter text.</div>
  		    				      	<input type="text" name="pfm_add_quality_criteria" id="pfm_add_quality_criteria" class="form-control input-small" placeholder="Add Quality Criteria" />
  		    				      	<div class="row">
  		    				      		<div class="col-lg-6">
  			      				      	<!--<input type="text" name="add-quality-tag" placeholder="Add Tag" id="pfm_add_quality_tag" class="form-control input-small add-tag" />-->
                                        <textarea name="add-quality-tag" placeholder="Add Tag" id="pfm_add_quality_tag" class="form-control input-small add-tag"></textarea>
  		    				      		</div>
  		    				      		<div class="col-lg-6">
  			      				      	<input type="number" min="1" max="100" name="add-quality-weight" value="" id="pfm_add_quality_weight" class="form-control input-small add-tag" placeholder="Weight 1 - 100" />
  			      				      </div>
  			      				    </div>
  		    				      	<hr />
  		    				        <div class="quality-list-item">
  		    				        	<p class="text-muted">Click and drag to reorder criteria</p>
  		    				        	<ul class="list-unstyled" id="quality_criteria_list">
  		    				        	</ul>
  		    				        	<hr />
  		      				        </div>
  		    				      </div>
  		    				    </div>
  		  				    	<div id="contentCollapse" class="tab-pane">
  		    				    	<div class="form-group">
  		    				    		<label for="" class="control-label col-sm-4">Category Weight</label>
  		    				    		<div class="col-sm-2">
  		    				    			<input class="form-control input-small" type="number" id="pfmi_content_weight_input" value="0" min="0" max="100"/>
  		    				    		</div>
  		    				    		<div class="col-sm-2">
  		    				    			<input type="button" class="btn btn-purple" value="+" id="add_content_criteria_btn"/>
  		    				    		</div>
  		    				    	</div>
  		    				      <div class="panel-body rubric-criteria-panel">
  		    				      	<div class="alert alert-danger alertCriteria" style="display: none;">Please enter text.</div>
  		    				      	<input type="text" name="pfm_add_content_criteria" id="pfm_add_content_criteria" class="form-control input-small" placeholder="Add Content Criteria"/>
  		    				      	<div class="row">
  		    				      		<div class="col-lg-6">
  				    				      	<!--<input type="text" name="add-content-tag" placeholder="Add Tag" id="pfm_add_content_tag" class="form-control input-small add-tag" />-->
                                            <textarea name="add-content-tag" placeholder="Add Tag" id="pfm_add_content_tag" class="form-control input-small add-tag"></textarea>
  			    				      	</div>
  			    				      	<div class="col-lg-6">
  				    				      	<input type="number" min="1" max="100" name="add-content-weight" value="" id="pfm_add_content_weight" class="form-control input-small add-tag" placeholder="Weight 1 - 100" />
  				    				      </div>
  				    				    </div>
  		    				      	<hr />
  		    				        <div class="content-list-item">
  		    				        	<p class="text-muted">Click and drag to reorder criteria</p>
  		    				        	<ul class="list-unstyled" id="content_criteria_list">
  		    				        	</ul>
  		    				        	<hr />
  		    				        </div>
  		    				      </div>
  		    				    </div>
  		  				    <div id="processCollapse" class="tab-pane">
  		  				    	<div class="form-group">
  		  				    		<label for="" class="control-label col-sm-4">Category Weight</label>
  		  				    		<div class="col-sm-2">
  		  				    			<input class="form-control input-small" type="number" id="pfmi_process_weight_input" value="0" min="0" max="100"/>
  		  				    		</div>
  		  				    		<div class="col-sm-2">
  		  				    			<input type="button" class="btn btn-red" value="+" id="add_process_criteria_btn"/>
  		  				    		</div>
  		  				    	</div>
  		  				      <div class="panel-body rubric-criteria-panel">
  		  				      	<div class="alert alert-danger alertCriteria" style="display: none;">Please enter text.</div>
  		  				      	<input type="text" name="pfm_add_process_criteria" id="pfm_add_process_criteria" class="form-control input-small" placeholder="Add Process Criteria"/>
  		  				      	<div class="row">
  		  				      		<div class="col-lg-6">
  				  				      	<!--<input type="text" name="add-process-tag" placeholder="Add Tag" id="pfm_add_process_tag" class="form-control input-small add-tag" />-->
                                        <textarea name="add-process-tag" placeholder="Add Tag" id="pfm_add_process_tag" class="form-control input-small add-tag"></textarea>
  				  				      </div>
  				  				      <div class="col-lg-6">
  				  				      	<input type="number" min="1" max="100" name="add-process-weight" value="" id="pfm_add_process_weight" class="form-control input-small add-tag" placeholder="Weight 1 - 100" />
  				  				      </div>
  				  				    </div>
  		  				      	<hr />
  		  				        <div class="process-list-item">
  		  				        	<p class="text-muted">Click and drag to reorder criteria</p>
  		  				        	<ul class="list-unstyled" id="process_criteria_list">
  		  				        	</ul>
  		  				        	<hr />
  		  				        </div>
  		  				      </div>
  		  				    </div>
  						    </div>
  					 		</div><!-- /.criteria-section -->
  				 		</div>					 		
		        <hr />
		        </div><!-- /. row -->
		        	<div class="modal-footer" >
		        	  <input type="reset" class="btn btn-default" data-dismiss="modal" value="Close"/>
		        	  <input type="submit" class="btn btn-primary" value="Save Details" id="btnSavePerformance"/>
		        	</div>
		        </form>
		      </div><!-- /.modal-body -->
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<!--New Evidence Details Modal Form--> 
			<div class="modal fade modal-wide" id="new_evidence_details_modal" tabindex="-1" role="dialog" aria-labelledby="newPTLabel" aria-hidden="true" data-dismiss="false">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header teacher-header">
			        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			        <h4 class="modal-title">Other Evidence Details</h4>
			      </div>
			      <div class="modal-body">
			        <form role="form" class="form-horizontal" id="new_evidence_form">
			        	<!--Create rubric here-->
			        	<div class="row">
			        		<div class="col-lg-7">
			        			<div class="form-group">
			        				<label for="evd_evidence_performance_name" class="col-sm-4 control-label">Performance Task</label>
			        				<div class="col-sm-8">
			        					<select name="evd_evidence_performance_name" id="evd_evidence_performance_name" class="form-control input-small" required>
			        					</select>
			        				</div>
			        			</div>
				        		<div class="form-group">
				        			<label for="evd_evidence_name" class="col-sm-4 control-label">Name</label>
				        			<div class="col-sm-8">
                                        <input type="hidden" name="evd_evidence_id" class="form-control input-small" id="evd_evidence_id"/>
					        			<input type="text" name="evd_evidence_name" id="evd_evidence_name" class="form-control input-small" required />
					        		</div>
				        		</div>
				        		<div class="form-group">
				        			<label for="evd_evidence_goal" class="control-label col-sm-4">Goal</label>
					        		<div class="col-sm-8">
					        			<input type="text" name="evd_evidence_goal" id="evd_evidence_goal" class="form-control input-small" />
					        		</div>
				        		</div>
					        	<div class="form-group">
					        		<label for="evd_evidence_deliverables" class="control-label col-sm-4">Deliverables</label>
					        		<div class="col-sm-8">
						        		<input type="text" name="evd_evidence_deliverables" id="evd_evidence_deliverables" class="form-control input-small" />
						        	</div>
					        	</div>
					        </div><!-- col-lg-5 -->
			        		<div class="col-lg-5">
			        			<ul id="evidencecategorytab" class="nav nav-tabs nav-justified">
			        			  <li class="active"><a href="#impact_section_ev" data-toggle="tab">Impact</a></li>
			        			  <li><a href="#quality_section_ev" data-toggle="tab">Quality</a></li>
			        			  <li><a href="#content_section_ev" data-toggle="tab">Content</a></li>
			        			  <li><a href="#process_section_ev" data-toggle="tab">Process</a></li>
			        			</ul>
			        			<div class="tab-content">
			        				<div id="impact_section_ev" class="tab-pane active">
				        				<ul id="impact_list">
				        				</ul>
				        			</div>
				        			<div id="quality_section_ev" class="tab-pane">
					        			<ul id="quality_list">
					        			</ul>
				        			</div>
				        			<div id="content_section_ev" class="tab-pane">
					        			<ul id="content_list">
					        			</ul>
				        			</div>
				        			<div id="process_section_ev" class="tab-pane">
					        			<ul id="process_list" style="max-height: 100px; overflow: scroll;">
					        			</ul>
				        			</div>
				        		</div>
			        		</div>
			        	 </div><!-- row -->
			        	<div class="modal-footer" >
			        	  <input type="reset" class="btn btn-default" data-dismiss="modal" value="Close"/>
			        	  <input type="submit" class="btn btn-primary" value="Save Details" id="btnSaveEvidence"/>
			        	</div>
			        </form>
			      </div>
			    </div><!-- /.modal-content -->
			  </div><!-- /.modal-dialog -->
			</div><!-- /.modal -->	
	{% include "tsweb/main/editprofile.html" %}	
</body>
</html>