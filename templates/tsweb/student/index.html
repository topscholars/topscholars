{% load staticfiles %}
<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8"/> 
	<!--<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/Prototype.css' %}" />-->
<!--	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/smoothness/jquery-ui-1.10.3.custom.min.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/smoothness/jquery-ui-1.10.3.custom-edited.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/bootstrap.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'tsweb/css/topscholars.css' %}" />-->
	
	<link rel="stylesheet" href="{% static 'tsweb/css/bootstrap.css' %}" type="text/css" />
	<link rel="stylesheet" href="{% static 'tsweb/css/bootstrap-glyphicons.css' %}" type="text/css" />
	<link rel="stylesheet" href="{% static 'tsweb/css/topscholars.css' %}" type="text/css" />
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	<link rel="stylesheet" href="{% static 'tsweb/css/redactor.css' %}" type="text/css" />
	<link rel="stylesheet" href="{% static 'tsweb/css/jquery.comment.css' %}" type="text/css" />
	<!--
	 <link rel="stylesheet" href="../../../static/tsweb/css/bootstrap.css" type="text/css" />
	 <link rel="stylesheet" href="../../../static/tsweb/css/topscholars.css" type="text/css" />
	 <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
	 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
	 <link rel="stylesheet" href="../../../static/tsweb/css/redactor.css" />
	 <link rel="stylesheet" href="../../../static/tsweb/css/jquery.comment.css" />
	-->
	 
	 <!--<link rel="stylesheet" href="../../../static/tsweb/css/redactor-iframe.css" />-->
	 <!--<script src="{% static 'tsweb/js/jQuery1.10.1.js' %}"></script>-->
	 <!--<script src="{% static 'tsweb/js/jquery-ui-1.10.3.custom.min.js' %}"></script>-->
	 
 	<script src="{% static 'tsweb/js/jQuery1-10-1.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/jquery-ui-1.10.3.custom.min.js' %}"></script>
	<script src="{% static 'tsweb/js/bootstrap.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/transition.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/jquery.cookie.js' %}"></script>
	<script src="{% static 'tsweb/js/util.js' %}"></script>
	<script src="{% static 'tsweb/js/popover.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/redactor.min.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.comment.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery-touch-punch.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'tsweb/js/jquery.tagedit.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.autoGrowInput.js' %}"></script>
	<script src="{% static 'tsweb/js/jquery.validate.js' %}"></script>
    <script src="{% static 'tsweb/js/fontcolor.js' %}"></script>
    <script src="{% static 'tsweb/js/fontfamily.js' %}"></script>
    <script src="{% static 'tsweb/js/fontsize.js' %}"></script>
	
	 <!--
	 <script src="../../../static/tsweb/js/jQuery1-10-1.js" type="text/javascript"></script>
	 <script src="../../../static/tsweb/js/jquery-ui-1-10-3-custom-min.js" type="text/javascript"></script>
	 <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	 <script src="../../../static/tsweb/js/bootstrap.js" type="text/javascript"></script>
	 <script src="../../../static/tsweb/js/transition.js" type="text/javascript"></script>
	 <script src="../../../static/tsweb/js/popover.js" type="text/javascript"></script>
	 <script src="../../../static/tsweb/js/redactor.min.js" type="text/javascript"></script>
	 <script src="../../../static/tsweb/js/jquery.comment.js" type="text/javascript"></script>
	 <script src="../../../static/tsweb/js/jquery-touch-punch.min.js" type="text/javascript"></script>
	 
	 -->
	<script>
	function EDITTABLE() {
        var thisClass = this;
        //var evalClass = 'VIEWAJAX';
        var evalClass = 'SUBMISSIONREVIEW';
        var url = "{% url 'tsweb:tprocessajax' %}";
        
        this.getData = function () {
            $.getJSON(
                url,
                {
                    'class': 'VIEWAJAX',
                },
                function (result) {
                	$('#redactor_content').redactor({ plugins: ['fontcolor', 'fontfamily', 'fontsize'] });
                	$('#redactor_content').redactor('set', result.essay);

                })
                .error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
        }
       this.categoryHighlightList = function (name) {
            var categoryid = 0;
            switch (name) {
                case "impact":
                    categoryid = 1;
                    break;
                case "quality":
                    categoryid = 2;
                    break;
                case "content":
                    categoryid = 3;
                    break;
                case "process":
                    categoryid = 4;
                    break;
            }
            var textComment = '';
            $.getJSON(
                    url,
                    {
                        'class': evalClass,
                        'method': 'tagCategoryHighlightList',
                        'categoryid': categoryid,
                        'submissionreviewerid': submissionreviewerid
                    },
                    function (result) {
                        $(".essayhighlight").css({ 'background': 'red' });
                        $.each(result, function (i, val) {
                            var spanid = val[0];
                            $('inline[name="' + spanid + '"]').css({ 'background': '#ffff00' });
                            textComment += "- " + val[1] + "<br/>";
                        });
                        //$("#commentSection").html(textComment);
                    }).error(function (xhr, status, error) {
                        alert('Error occur. Please contact the administrator.');
                    });
        }
        this.tagClickHighlightList = function (id) {
            var textComment = '';
            $.getJSON(
                    url,
                    {
                        'class': evalClass,
                        'method': 'tagClickHighlightList',
                        'taglinkid': id,
                        'submissionreviewerid': submissionreviewerid
                    },
                    function (result) {
                        $(".essayhighlight").css({ 'background': 'red' });
                        $.each(result, function (i, val) {
                        	
                            var spanid = val[0];
                            console.log($('inline[name="' + spanid + '"]'));
                            $('inline[name="' + spanid + '"]').css({ 'background': val[2] });
                            textComment += "- " + val[1] + "<br/>";
                        });
                        //$("#commentSection").html(textComment);
                    }).error(function (xhr, status, error) {
                        alert('Error occur. Please contact the administrator.');
                    });
        }
        this.tagHighlightList = function () {
            $.getJSON(
                url,
                {
                    'class': evalClass,
                    'method': 'tagHighlightList',
                    'submissionreviewerid': submissionreviewerid
                },
                function (result) {
                    $("#tagList li").remove();
                    $("#Ul1").html('');
                    $("#commentArea").val('');
                    $("<ul>").attr("id", "tagList").appendTo("#Ul1");
                    if (result.length > 0) {
                        $.each(result, function (i, val) {
                            var li = $("<li>");
                            //create link
                            $("<a>").text(val[1] + "(" + val[3] + ")").attr({ "data-id": val[0], href: "#", class: "tagClickHighlightList" }).appendTo(li);
                            //set tag size
                            if (val[2] == 0) {
                                li.children().css({ 'font-size': '1.5em', 'font-weight': 'bold' });
                            } else {
                                li.children().css({ 'font-size': '1.2em' });
                            }
                            //add to list
                            li.appendTo("#tagList");
                        });
                    } else {
                        $("#tagList").height('50');
                    }
                    $(".tagClickHighlightList").click(function () {
                        var id = $(this).data("id");
                        thisClass.tagClickHighlightList(id);
                        return false;
                    });
                }).error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
        }
        this.getSelectionCharOffsetsWithin = function (element) {
            var start = 0, end = 0;
            var sel, range, priorRange;
            if (typeof window.getSelection != "undefined") {
                range = window.getSelection().getRangeAt(0);
                priorRange = range.cloneRange();
                priorRange.selectNodeContents(element);
                priorRange.setEnd(range.startContainer, range.startOffset);
                start = priorRange.toString().length;
                end = start + range.toString().length;
            } else if (typeof document.selection != "undefined" &&
                    (sel = document.selection).type != "Control") {
                range = sel.createRange();
                priorRange = document.body.createTextRange();
                priorRange.moveToElementText(element);
                priorRange.setEndPoint("EndToStart", range);
                start = priorRange.text.length;
                end = start + range.text.length;
            }
            return {
                start: start,
                end: end
            };
        }
        this.essayEvent = function () {
            $('#ele_submissionversionessay').mouseup(function () {
                if (thisClass.getSelectionCharOffsetsWithin(this).start != thisClass.getSelectionCharOffsetsWithin(this).end) {
                    var redactor_object = $('#ele_submissionversionessay').redactor('getObject');
                    redactor_object.selectionSave();
                    thisClass.showHighlightDialog(true);
                }
            }).keypress(function (e) {
                return false;
            });
        }
        this.editHighlightDialog = function (edit) {
            if (edit) {
                $('#edithighlight').show();
                $('#viewhighlight').hide();
                $('#tdtagdisplay').hide();
                $('#tdtag').show();
                $('#ele_highlightTag').removeAttr("disabled");
                $('#ele_highlightComment').removeAttr("disabled");
                $('.tagedit-list').removeAttr("disabled");
                $('#ele_highlightCategory').removeAttr("disabled");
            }
            else {
                $('#edithighlight').hide();
                $('#viewhighlight').show();
                $('#tdtagdisplay').show();
                $('#tdtag').hide();
                $('#ele_highlightTag').attr("disabled", "disabled");
                $('#ele_highlightComment').attr("disabled", "disabled");
                $('#ele_highlightCategory').attr("disabled", "disabled");
            }
        }
        this.showHighlightDialog = function (show) {
            if (show) {
                $('#diveditbg').show();
                $('#divedithighlight').show();
                $('.editHighlightSuggest').hide();
                if (highlightid != '') {
                    thisClass.editHighlightDialog(false);
                    $('#btndeletehighlight').show();
                }
                else {
                    thisClass.editHighlightDialog(true);
                    $('#btndeletehighlight').hide();
                }
            }
            else {
                $('#diveditbg').hide();
                $('#divedithighlight').hide();
                highlightid = '';
                $('#ele_highlightTagDisplay').text('');
                $('.tagedit-listelement-old').remove();
                $('#ele_highlightComment').val('');
                $('#ele_highlightCategory').val('');
            }
        }
        this.getHighlightDataTag = function () {
            var tagids = [];
            $.getJSON(
                url,
                {
                    'class': 'SUBMISSIONREVIEW',
                    'method': 'getSubmissionVersionHighlightTags',
                    'highlightid': highlightid
                },
                function (result) {
                    $(".tagedit-listelement-old").remove();
                    var displaytxt = '';
                    for (var i = 0; i < result.length; i++) {
                        tagids.push(result[i].id);
                        thisClass.addTagEditElement(result[i].name, result[i].id);
                        if (displaytxt != '')
                            displaytxt = displaytxt + ', '
                        displaytxt = displaytxt + result[i].name;
                    }
                    thisClass.tagEditCloseEvent();
                    thisClass.getSelectSuggest(tagids);
                    $('#ele_highlightTagDisplay').text(displaytxt);
                })
            .error(function (xhr, status, error) {
                alert('Error occur. Please contact the administrator.');
            });
        }
        this.getHighlightData = function () {
            $.getJSON(
                url,
                {
                    'class': 'SUBMISSIONREVIEW',
                    'method': 'getSubmissionVersionHighlight',
                    'highlightid': highlightid
                },
                function (result) {
                    $.each(result, function (ini, val) {
                        if ($('#ele_' + ini).is("span") || $('#ele_' + ini).is("div"))
                            $('#ele_' + ini).html(val);
                        else
                            $('#ele_' + ini).val(val);
                    });
                    thisClass.getHighlightDataTag();
                    thisClass.showHighlightDialog(true);
                })
            .error(function (xhr, status, error) {
                alert('Error occur. Please contact the administrator.');
            });
        }
        this.saveEditTags = function (tagids, method) {
            var odata;
            if (method == 'add') {
                odata = {
                    class: evalClass,
                    method: 'addSubmissionversionHighlight',
                    submissionreviewerid: submissionreviewerid,
                    highlightComment: $('#ele_highlightComment').val(),
                    tagids: tagids,
                    categoryid: $('#ele_highlightCategory').val()
                };
            } else if (method == 'save') {
                odata = {
                    class: evalClass,
                    method: 'saveSubmissionversionHighlight',
                    highlightid: highlightid,
                    highlightComment: $('#ele_highlightComment').val(),
                    tagids: tagids,
                    categoryid: $('#ele_highlightCategory').val()
                };
            }
            $.post(url, odata,
                function (result) {
                    highlightid = result.recid;
                    var redactor_object = $('#ele_submissionversionessay').redactor('getObject');
                    redactor_object.selectionRestore();
                    redactor_object.inlineSetAttr({'name': result.recid, "style": "background-color:red;", "class": 'essayhighlight', "ondblclick" : 'openHighlightDialog(' + result.recid + ')' });
                    // redactor_object.inlineSetAttr('name', result.recid);
//                     
                    // redactor_object.inlineSetStyle("background-color", "red");
                    // redactor_object.inlineSetClass('essayhighlight');
                    // redactor_object.inlineSetAttr('ondblclick', 'openHighlightDialog(' + result.recid + ')');
                    redactor_object.sync();
                    odata = {
                        class: evalClass,
                        method: 'updateReviewerEssay',
                        submissionreviewerid: submissionreviewerid,
                        essay: $('#ele_submissionversionessay').redactor('getEditor').html()
                    };
                    $.post(url, odata,
                        function (result) {
                            thisClass.tagHighlightList();
                            thisClass.getSubmitRubric();
                            thisClass.getHighlightData();
                            thisClass.editHighlightDialog(false);
                        })
                    .error(function (xhr, status, error) {
                        alert('Error occur. Please contact the administrator.');
                    });
                })
                .error(function (xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
                });
        }
        this.save = function () {
            var tagids = [];
            var i = 0;
            $('input[name*="-a"]').each(function (index) {
                var name = $(this).attr('name');
                name = name.replace('tag[', '');
                name = name.replace('-a]', '');
                tagids.push(name);
            });
            if (highlightid != '') {
                //update
                thisClass.saveEditTags(tagids, 'save');
            }
            else {
                //insert
                thisClass.saveEditTags(tagids, 'add');
            }
        }
        this.del = function () {
            var redactor_object = $('#ele_submissionversionessay').redactor('getObject');
            $('inline[name="' + highlightid + '"]').each(function () {
                redactor_object.selectionElement(this);
                redactor_object.inlineRemoveAttr('name');
                redactor_object.inlineRemoveAttr('ondblclick');
                redactor_object.inlineRemoveClass('essayhighlight');
                redactor_object.inlineRemoveStyle('background-color');
                redactor_object.inlineRemoveAttr('ondblclick');
                redactor_object.sync();
            });
            $.post(url,
                    {
                        'class': 'SUBMISSIONREVIEW',
                        'method': 'delete',
                        'submissionreviewerid': submissionreviewerid,
                        'highlightid': highlightid,
                        'essay': $('#ele_submissionversionessay').redactor('getEditor').html()
                    },
                    function (result) {
                        thisClass.showHighlightDialog(false);
                        thisClass.tagHighlightList();
                        thisClass.getSubmitRubric();
                    })
            .error(function (xhr, status, error) {
                alert('Error occur. Please contact the administrator.');
            });
        }
        this.tagEditCloseEvent = function () {
            $(".tagedit-close").unbind('click');
            $(".tagedit-close").click(function () {
                var tagElement = $(this).prev();
                var thisInput = tagElement.attr('name');
                thisInput = thisInput.replace('tag[', '');
                thisInput = thisInput.replace('-a]', '');
                var thisId = thisInput;
                var tagNewIds = [];
                $('input[name*="-a"]').each(function (index) {
                    var nameInput = $(this).attr('name');
                    nameInput = nameInput.replace('tag[', '');
                    nameInput = nameInput.replace('-a]', '');
                    if (nameInput != thisId) {
                        tagNewIds.push(nameInput);
                    }
                });
                thisClass.getSelectSuggest(tagNewIds);
            });
        }
        this.addTagEditElement = function (name, id) {
            var tagitem = '<li class="tagedit-listelement tagedit-listelement-old"><span dir="ltr">' + name + '</span><input type="hidden" name="tag[' + id + '-a]" value="' + name + '"><a class="tagedit-close" title="Remove from list.">x</a></li>'
            $(tagitem).insertBefore('.tagedit-listelement-new');
        }
        this.getSelectSuggest = function (tagids) {
            var option = '';
            if (tagids != "") {
                $.post(
                    url,
                    {
                        'class': evalClass,
                        'method': 'getSelectSuggest',
                        tagids: tagids
                    },
                    function (result) {
                        $("#ele_suggestTags option").remove();
                        $.each(result, function (ini, val) {
                            option += '<option value="' + val.id + '">' + val.label + '</option>';
                        });
                        $("#ele_suggestTags").append(option);
                        $("#ele_suggestTags").unbind('dblclick');
                        $("#ele_suggestTags").dblclick(function () {
                            var id = $(this).val();
                            var name = $("#ele_suggestTags option:selected").text();
                            $("#ele_suggestTags option[value='" + id + "']").remove();
                            thisClass.addTagEditElement(name, id);
                            var tagNewIds = [];
                            $('input[name*="-a"]').each(function (index) {
                                var nameInput = $(this).attr('name');
                                nameInput = nameInput.replace('tag[', '');
                                nameInput = nameInput.replace('-a]', '');
                                tagNewIds.push(nameInput);
                            });
                            thisClass.tagEditCloseEvent();
                            thisClass.getSelectSuggest(tagNewIds);
                        });
                    }).error(function (xhr, status, error) {
                        alert('Error occur. Please contact the administrator.');
                    });
            } else {
                $("#ele_suggestTags option").remove();
                $(".editHighlightSuggest").hide();
            }
        }
        this.showSubmitDialog = function (show) {
            if (show) {
                $('#diveditbg').show();
                $('#submitpopup').show();
            }
            else {
                $('#diveditbg').hide();
                $('#submitpopup').hide();
            }
        }
        this.submit = function () {
            thisClass.showSubmitDialog(true);
            $(".submit_criteria").each(function(){
                    id = $(this).attr('id');
                    value = $(this).val();
                    criteriaid.push(id);
                    criteriaval.push(value);
            });
            odata = {'class' :  'SUBMISSIONREVIEW',
                     'method' : 'submit',
                     'submissionreviewerid': submissionreviewerid,
                     'stage' : $("#submit_stage").val(),
                     'comment' : $("#submit_comment").val(),
                     'progress' : $("#submit_progress").val(),
                     'impact': $(".impact_criteria").val(),
                     'quality': $(".quality_criteria").val(),
                     'content': $(".content_criteria").val(),
                     'process': $(".process_criteria").val()
                     };
            $.post(url,odata,
                    function(result){
                            //thisClass.showSubmitDialog();
                            window.location = "{% url 'tsweb:tsubmissionlist' %}";
                    })
            .error(function(xhr, status, error) {
                    alert('Error occur. Please contact the administrator.');
            });
        }
        
        this.initValidateForm = function(){
			  formValidate.validate({              
			    rules: {
			      	progress:{
			      		required: true,
			      		number: true,
			      	},
			    },
				 invalidHandler: function(event, validator) {
				// 'this' refers to the form
					thisClass.submitForm = false;
				}
			  });
	    }
	
		this.initValidateFormEvent = function(){
			thisClass.submitForm = true;
		  	formValidate.validate().form();
		}
		
		this.resetValidatForm = function(){
			var validator = formValidate.validate();
			validator.resetForm();
			$(".error").removeClass('error');	
		}
        this.initContent = function () {
        	thisClass.getData();
        }
	}
    function openHighlightDialog(id) {
        var gen = new EDITTABLE();
        highlightid = id;
        gen.getHighlightData();
    }
		
	$(document).ready(function () {
		$(function(){
            var gen = new EDITTABLE();
        	gen.initContent();
		});

	});
	</script>

</head>

<body>

{% include "tsweb/student/include/navbar.html" %}
	
	<div class="page-container">
		
		
		<div class="assignment-edit-section">
			 <div class="block-cell block-wide">
				 <div class="section-title">
				 		<h4 style="text-overflow: ellipsis;"
				 			rel="popover"
				 			data-placement="bottom"
				 			data-container=".container"
				 			data-toggle="popover" title 
				 			data-trigger="hover"
				 			data-content="{{ assignment.goaloftask }}"><i class="fa fa-file-o"></i> {{ assignment.name }} - {{ assignment.goaloftask }}</h4>
				 	</div>
			 		<div id="redactor_content" name="content" style="width: 100%; height: auto;"></div>
			 		<!--ADD TAGGING BUTTON OR HIGHLIGHT STATE-->
			 		
			 		<div class="controls">
			 			<!--<a href="{% url 'tsweb:tsubmissionlist' %}" class="btn btn-warning btn-small pull-right" id="exitBtn" style="margin-left: 10px;">Exit</a>-->
			 			<a href="#save_assignment_modal" data-toggle="modal" data-target="#save_assignment_modal" type="button" id="saveAssignment" class="btn btn-info btn-small pull-right" style="margin-left: 10px; padding: 5px;">Go to full editor</a>
			 			<div class="searchlist pull-right">
			 				<div class="form-group">
			 					<!--<label for="lstClassid" class="col-sm-4 control-label">Revision Filter:&nbsp;</label>-->
			 					<!--<select id="ele_submissionversionversion" class="form-control input-small">
			 						<option value="">Please Select</option>
			 					{% for row in submissionversionlist %}
			 						<option value="{{ row.version }}">Revision {{ row.version }}</option>
			 					{% endfor %}
			 					</select>-->
			 				</div>
			 			</div>
			 		</div>
			 		
			 </div>
			
		</div>
		
		<div class="panel-group side-panel" id="side-panel" style="max-height: 100%; overflow: scroll;">
		
			<div class="panel-default block-cell block-thin">
				<div class="panel-heading block-header">
					<h3 class="panel-title">
						<a href="#">
							Activities<i class="fa fa-road fa-large pull-right"></i>
						</a>
					</h3>
				</div>
				<div id="activityUpdates" class="panel-collapse  in">
					<div class="block-body">
						{% for lessonactivity in lessonactivitylist %}
							<p><a href="#">{{ lessonactivity.name }}</a></p>
						{% endfor %}
					</div>
				</div>
			</div>
				  
		  <div class="panel-default block-cell block-thin" style="overflow: scroll;">
		    <div class="panel-heading block-header">
		      <h3 class="panel-title">
		        <a>
		          Courses<i class="fa fa-book fa-large pull-right"></i>
		        </a>
		      </h3>
		    </div>
		    <div id="collapseTwo" class="panel-collapse  in">
		      <div class="block-body">
		        <ul class="block-list" id="classesList">
		        	<!--
		        	{% for class in classschedulelist %}
		        	<li>
		        		<a href="#" id="class-details" rel="popover" 
		        			data-placement="left" 
		        			data-container=".container" 
		        			data-toggle="popover" title
		        			data-trigger="hover" 
		        			data-content="{{ class.description }}"
		        			role="button">{{ class.code }} - {{ class.subcode }}
		        		</a>	        	 
		        	</li>
					{% endfor %}
					-->
		        </ul>
		      </div>
		    </div>
		  </div>
  
		  <div class="panel panel-default block-cell block-thin" style="overflow: scroll;">
		    <div class="panel-heading block-header">
		      <h3 class="panel-title">
		        <a data-toggle="collapse" data-parent="#side-panel" href="#collapseThree">
		          Assignments<i class="fa fa-file fa-large pull-right"></i>
		        </a>
		      </h3>
		    </div>
		    <div id="collapseThree" class="panel-collapse in">
		      <div class="block-body">
		       	<table class="table table-hover" id="assignment-table">
		       		<thead>
		       			<tr>
		       				<th>Name</th>
		       				<th>Due Date</th>
		       				<th></th>
		       			</tr>
		       		</thead>
		       		<tbody>
		       			{% for submission in submissionlist %}
		       			<tr>
		       				<td>
		       					<a href="{% url 'tsweb:stsubmissionreview' submission.id %}" id="assignment-details" rel="popover"
		       						data-placement="left"
		       						data-container=".container"
		       						data-toggle="popover" title
		       						data-trigger="hover"
		       						data-content="{{ submission.assignmentid.description }}"
		       						role="button">
									{{ submission.getAssignment }}
		       					</a>
		       				</td>
		       				<td>{{ submission.duedate|date:"d-M-Y" }}</td>
		       				<td><a href="{% url 'tsweb:stsubmissionreview' submission.id %}"><i class="fa fa-user fa-lg" rel="popover"
		       						data-placement="left"
		       						data-container=".container"
		       						data-toggle="popover" title
		       						data-trigger="hover"
		       						data-content="Self review"></i></a></td>
		       			</tr>
		       			{% endfor %}
		       		</tbody>
		       	</table>
		      </div>
		    </div>
		  </div>
		</div> <!--End Side Panel-->
		<script>
		$(document).ready(function () {

			// Overview nav
			$(".overview-nav ul li").click(function () {
				$(this).addClass('active-white');
				$(this).parent().children('li').not(this).removeClass('active-white');
			});
			
			// Show popover information 
			$("[rel=popover]").popover();
		});
		</script>
	
	<!--Reset Password Modal Form--> 
	<div class="modal fade" id="save_assignment_modal" tabindex="-1" role="dialog" aria-labelledby="saveAssignmentLabel" aria-hidden="true" data-dismiss="false">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header teacher-header">
	        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	        <h4 class="modal-title">Do you want to save your changes before continuing?</h4>
	      </div>
	      <div class="modal-body text-center">
	        <input type="reset"  class="btn btn-default" data-dismiss="modal" name="disgard_changes" id="discard_changes" value="Discard Changes" />
	        <input type="submit" class="btn btn-primary" name="save_changes" id="save_changes" value="Save Changes" />
	      </div>
<!--	      <div class="modal-footer">
	        <input type="reset" class="btn btn-default" data-dismiss="modal" value="Close"/>
	        <input type="submit" class="btn btn-primary" value="Update Password" id="btnSave"/>
	      </div>-->
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
			
	</div> <!--End Container-->
<!--	
	<footer class="footer">
		<div class="container">
			<p>&copy; TopScholars 2013</p>
		</div>
	</footer>-->

</body>

</html>
